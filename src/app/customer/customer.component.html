<div class="container">
  <app-menus></app-menus>
  <mat-card>
    <div class="mat-card-header">
      <h3>Lista de clientes</h3>
      <button mat-raised-button color="primary" (click)="openCustomerDialog()">Nuevo Cliente</button>
    </div>
    <div class="mat-card-content">
      <ngx-datatable
        class="bootstrap"
        [rows]="dataSource"
        [columns]="[ { prop: 'id', name: 'ID' },
        { prop: 'name', name: 'Nombre' },
        { prop: 'address', name: 'Dirección' },
        { prop: 'mobile', name: 'Teléfono' },
        { prop: 'balance', name: 'Balance' },
        { prop: 'Action', name: 'Acciones',cellTemplate: this.actionTemplate }]">

       </ngx-datatable>
       </div>
       </mat-card>

  <!-- Template para las acciones -->
  <ng-template #actionTemplate let-row="row">
    <button mat-icon-button (click)="updateCustomer(row)">
      <mat-icon>edit</mat-icon>
    </button>
    <button mat-icon-button (click)="deleteCustomer(row.id)">
      <mat-icon>delete</mat-icon>
    </button>
    <button mat-icon-button (click)="viewCustomer(row.id)">
      <mat-icon>search</mat-icon>
  </button>
  </ng-template>

  <!-- Modal para añadir cliente -->
  <ng-template #customerDialog>
    <h4 mat-dialog-title>Añadir cliente</h4>
    <form #customerForm="ngForm" (ngSubmit)="createCustomer(customerForm.value)">
      <mat-form-field appearance="fill">
        <mat-label>Nombre</mat-label>
        <input matInput type="text" name="name" id="name" required ngModel />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Teléfono</mat-label>
        <input matInput type="number" name="mobile" id="mobile" required ngModel />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Balance</mat-label>
        <input matInput type="number" name="balance" id="balance" required ngModel />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Dirección</mat-label>
        <textarea matInput name="address" id="address" rows="5" required ngModel></textarea>
      </mat-form-field>
      <div mat-dialog-actions>
        <button mat-button type="submit" color="primary">Guardar</button>
        <button mat-button type="button" (click)="dialogRef.close()">Cerrar</button>
      </div>
    </form>
  </ng-template>
</div>
